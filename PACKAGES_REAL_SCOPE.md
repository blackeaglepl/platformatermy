# ğŸ“¦ Prawdziwy zakres pakietÃ³w - Termy GÃ³rce

**Data utworzenia:** 2025-10-16
**Å¹rÃ³dÅ‚o danych:** https://termygorce.pl/pakiety/
**Status:** âš ï¸ DO ZATWIERDZENIA - nie implementowaÄ‡ przed potwierdzeniem!

---

## ğŸ¯ Cel dokumentu

Dokument zawiera **PRAWDZIWY** zakres 6 pakietÃ³w oferowanych przez Termy GÃ³rce. Dane zostaÅ‚y zebraÄ‡ z:
1. Oficjalnej strony https://termygorce.pl/pakiety/
2. BezpoÅ›redniego opisu od wÅ‚aÅ›ciciela projektu

**âš ï¸ UWAGA:** Obecne dane w bazie sÄ… **dummy** i muszÄ… zostaÄ‡ zastÄ…pione!

---

## ğŸ“Š Struktura pakietÃ³w

### Nomenklatura stref

KaÅ¼dy pakiet skÅ‚ada siÄ™ z usÅ‚ug podzielonych na **3 strefy**:

| Strefa | Opis | PrzykÅ‚ady |
|--------|------|-----------|
| **Strefa Odnowy** | MasaÅ¼e, zabiegi pielÄ™gnacyjne, rytuaÅ‚y | MasaÅ¼, peeling, zabiegi twarzy |
| **Strefa Relaksu** | Basen, jacuzzi, sauny, grota solna | WejÅ›cie do strefy (z limitem czasu) |
| **Strefa Smaku** | Jedzenie, napoje, vouchery | Kolacja, deser, herbata |

**Specjalne:** NiektÃ³re pakiety majÄ… **warianty do wyboru** (np. Kobiecy Chill)

---

## ğŸ“‹ SzczegÃ³Å‚owy zakres pakietÃ³w

### Pakiet 1: Naturalna Harmonia
**Cena:** 449 zÅ‚/os. (zamiast 546 zÅ‚)
**Typ:** Dla pojedynczej osoby

#### Strefa Odnowy:
1. **RytuaÅ‚ "ZmysÅ‚owa Odnowa"** â€“ 90 min
   - Wariant 1: KsiÄ™Å¼ycowa
   - Wariant 2: Mango
   - **Uwaga:** Klient wybiera jeden wariant przy zakupie
2. **Zabieg PielÄ™gnacji Twarzy** â€“ 30 min
   - Peeling twarzy + masaÅ¼ na kremie

#### Strefa Relaksu:
3. **WejÅ›cie do Strefy Relaksu** â€“ 2,5 h
   - W cenie: basen termalny, jacuzzi, sauny, grota solna
   - **Uwaga:** To **JEDNA usÅ‚uga** z limitem czasowym, nie osobne usÅ‚ugi!

#### Strefa Smaku:
4. **Napar herbaciany do wyboru**
   - Wariant 1: Na ciepÅ‚o
   - Wariant 2: Na zimno

---

### Pakiet 2: Termalna Ulga
**Cena:** 239 zÅ‚/os. (zamiast 284 zÅ‚)
**Typ:** Dla pojedynczej osoby

#### Strefa Odnowy:
1. **MasaÅ¼ klasyczny z okÅ‚adami borowinowymi** â€“ 60 min
   - 30 min masaÅ¼ + 30 min okÅ‚ady borowinowe
   - **Uwaga:** To JEDNA usÅ‚uga, nie dwie!

#### Strefa Relaksu:
2. **WejÅ›cie do Strefy Relaksu** â€“ 1,5 h
   - W cenie: basen termalny, jacuzzi, sauny, grota solna

#### Strefa Smaku:
3. **Deser + kawa lub herbata do wyboru**
   - **Uwaga:** To JEDNA usÅ‚uga (deser + napÃ³j)

---

### Pakiet 3: Szept MiÅ‚oÅ›ci
**Cena:** 799 zÅ‚/para (zamiast 1008 zÅ‚)
**Typ:** âš ï¸ DLA 2 OSÃ“B (pakiet romantyczny dla pary)

#### Strefa Odnowy:
1. **MasaÅ¼ do wyboru â€“ 60 min (x2 osoby)**
   - Wariant 1: MasaÅ¼ ciepÅ‚Ä… Å›wiecÄ…
   - Wariant 2: MasaÅ¼ ciepÅ‚Ä… czekoladÄ…
   - **Uwaga:** KaÅ¼da osoba moÅ¼e wybraÄ‡ inny wariant!

#### Strefa Relaksu:
2. **Jacuzzi VIP** â€“ 60 min
   - W cenie: 2 lampki prosecco lub drinki bezalkoholowe
   - **Uwaga:** Jacuzzi dla pary, nie publiczne!
3. **WejÅ›cie do Strefy Relaksu** â€“ 1,5 h
   - W cenie: basen termalny, jacuzzi publiczne, sauny, grota solna

#### Strefa Smaku:
4. **Romantyczna kolacja** â€“ voucher 200 zÅ‚
   - Do wykorzystania w restauracji Term

---

### Pakiet 4: Kobiecy Chill
**Cena:** 499 zÅ‚/os. (zamiast 564 zÅ‚)
**Typ:** Dla pojedynczej osoby (lub grupy kobiet)

#### Strefa Odnowy (jeden wariant do wyboru):
**Wariant 1:**
1. MasaÅ¼ relaksacyjny â€“ 30 min
2. Zabieg PielÄ™gnacji Twarzy â€“ 30 min

**Wariant 2:**
1. MasaÅ¼ masÅ‚em shea â€“ 60 min
2. Peeling caÅ‚ego ciaÅ‚a â€“ 15 min

**âš ï¸ UWAGA:** Klient wybiera **jeden z dwÃ³ch wariantÃ³w** przy zakupie!

#### Strefa Relaksu:
3. **Jacuzzi VIP** â€“ 60 min
   - W cenie: butelka prosecco na grupÄ™
4. **WejÅ›cie do Strefy Relaksu** â€“ 2,5 h

#### Strefa Smaku:
5. **Voucher do wykorzystania w Strefie Smaku** â€“ 80 zÅ‚/os.

---

### Pakiet 5: WspÃ³lna Regeneracja
**Cena:** 299 zÅ‚/os. (zamiast 364 zÅ‚)
**Typ:** âš ï¸ DLA 2 OSÃ“B (pakiet dla pary/przyjaciÃ³Å‚)

#### Strefa Odnowy:
1. **MasaÅ¼ do wyboru â€“ 60 min (x2 osoby)**
   - Wariant 1: MasaÅ¼ klasyczny
   - Wariant 2: MasaÅ¼ ciepÅ‚ymi olejkami
   - **Uwaga:** KaÅ¼da osoba moÅ¼e wybraÄ‡ inny wariant!

#### Strefa Relaksu:
2. **WejÅ›cie do Strefy Relaksu** â€“ 2,5 h

#### Strefa Smaku:
3. **Voucher o wartoÅ›ci 80 zÅ‚ dla kaÅ¼dej osoby**
   - Do wykorzystania w Strefie Smaku
   - **Uwaga:** 2x voucher (osobny dla kaÅ¼dej osoby)

---

### Pakiet 6: Impreza Urodzinowa
**Cena:** 590 zÅ‚ za pakiet (zamiast 690 zÅ‚)
**Typ:** âš ï¸ DLA 6 DZIECI (staÅ‚a liczba uczestnikÃ³w)

#### Strefa Relaksu:
1. **WejÅ›cie do Strefy Relaksu** â€“ 1,5 h
   - Dla 6 dzieci

#### Strefa Smaku:
2. **2x karafka lemoniady**
3. **3x pizza margherita**

**âš ï¸ UWAGA:** To pakiet dla GRUPY, nie dla pojedynczej osoby!

---

## ğŸ”„ PorÃ³wnanie: Obecne dane (dummy) vs Prawdziwe

### âŒ Co musi zostaÄ‡ usuniÄ™te z bazy:

Obecne dummy usÅ‚ugi w `package_services`:
- âŒ "Basen termalny (2h)" - nie ma takiej osobnej usÅ‚ugi
- âŒ "Jacuzzi (30 min)" - jest "WejÅ›cie do Strefy Relaksu" zamiast
- âŒ "LeÅ¼aki termalne (1h)" - nie wystÄ™puje w Å¼adnym pakiecie
- âŒ "MasaÅ¼ relaksacyjny (60 min)" - jest, ale trzeba uzupeÅ‚niÄ‡ warianty
- âŒ "Sauna fiÅ„ska (30 min)" - jest w "WejÅ›ciu do Strefy Relaksu"
- âŒ "Grota solna (45 min)" - jest w "WejÅ›ciu do Strefy Relaksu"
- âŒ "Peeling ciaÅ‚a (30 min)" - jest "Peeling caÅ‚ego ciaÅ‚a (15 min)"
- âŒ "MasaÅ¼ gorÄ…cymi kamieniami (45 min)" - nie wystÄ™puje
- âŒ "Kolacja degustacyjna" - nie wystÄ™puje
- âŒ "Napoje zioÅ‚owe" - nie wystÄ™puje
- âŒ "Åšniadanie gÃ³rskie" - nie wystÄ™puje
- âŒ "Deser terminalny" - jest "Deser + kawa/herbata"
- âœ… "WypoÅ¼ycz rÄ™cznik i szlafrok" - OK (is_extra=true)

---

## ğŸ“ Propozycja nowej struktury `package_services`

### Lista wszystkich unikalnych usÅ‚ug (do utworzenia):

#### Strefa Odnowy (zone: odnowy)
| ID | Nazwa | Czas | Warianty | Pakiety |
|----|-------|------|----------|---------|
| 1 | RytuaÅ‚ "ZmysÅ‚owa Odnowa" | 90 min | ksiÄ™Å¼ycowa / mango | 1 |
| 2 | Zabieg PielÄ™gnacji Twarzy (peeling + masaÅ¼) | 30 min | - | 1, 4 (wariant 1) |
| 3 | MasaÅ¼ klasyczny z okÅ‚adami borowinowymi | 60 min | - | 2 |
| 4 | MasaÅ¼ (ciepÅ‚a Å›wieca / czekolada) | 60 min | Å›wieca / czekolada | 3 |
| 5 | MasaÅ¼ relaksacyjny | 30 min | - | 4 (wariant 1) |
| 6 | MasaÅ¼ masÅ‚em shea | 60 min | - | 4 (wariant 2) |
| 7 | Peeling caÅ‚ego ciaÅ‚a | 15 min | - | 4 (wariant 2) |
| 8 | MasaÅ¼ (klasyczny / ciepÅ‚e olejki) | 60 min | klasyczny / olejki | 5 |

#### Strefa Relaksu (zone: relaksu)
| ID | Nazwa | Czas | Warianty | Pakiety |
|----|-------|------|----------|---------|
| 9 | WejÅ›cie do Strefy Relaksu (basen, jacuzzi, sauny, grota) | 2,5 h | - | 1, 4 |
| 10 | WejÅ›cie do Strefy Relaksu (basen, jacuzzi, sauny, grota) | 1,5 h | - | 2, 3, 5, 6 |
| 11 | Jacuzzi VIP (z prosecco dla pary) | 60 min | - | 3 |
| 12 | Jacuzzi VIP (z prosecco dla grupy) | 60 min | - | 4 |

#### Strefa Smaku (zone: smaku)
| ID | Nazwa | Czas | Warianty | Pakiety |
|----|-------|------|----------|---------|
| 13 | Napar herbaciany do wyboru | - | ciepÅ‚o / zimno | 1 |
| 14 | Deser + kawa lub herbata do wyboru | - | - | 2 |
| 15 | Romantyczna kolacja (voucher 200 zÅ‚) | - | - | 3 |
| 16 | Voucher Strefa Smaku (80 zÅ‚/os.) | - | - | 4, 5 |
| 17 | Karafka lemoniady | - | - | 6 (qty: 2) |
| 18 | Pizza margherita | - | - | 6 (qty: 3) |

#### Extra (zone: extra)
| ID | Nazwa | Uwagi | Pakiety |
|----|-------|-------|---------|
| 19 | WypoÅ¼ycz rÄ™cznik i szlafrok | PrzysÅ‚uguje 1 raz dla kaÅ¼dej osoby | Wszystkie |

---

## ğŸ”§ Propozycja struktury `package_type_services`

**Legenda:**
- `qty` = quantity (ile razy usÅ‚uga w pakiecie)
- `is_variant` = czy jest to jedna z kilku opcji do wyboru
- `variant_group` = grupa wzajemnie wykluczajÄ…cych siÄ™ opcji

### Pakiet 1: Naturalna Harmonia
```
service_id | quantity | is_variant | variant_group
-----------|----------|------------|---------------
1          | 1        | false      | null
2          | 1        | false      | null
9          | 1        | false      | null
13         | 1        | false      | null
19         | 1        | true       | null (extra)
```

### Pakiet 2: Termalna Ulga
```
service_id | quantity | is_variant | variant_group
-----------|----------|------------|---------------
3          | 1        | false      | null
10         | 1        | false      | null
14         | 1        | false      | null
19         | 1        | true       | null (extra)
```

### Pakiet 3: Szept MiÅ‚oÅ›ci (dla 2 osÃ³b!)
```
service_id | quantity | is_variant | variant_group
-----------|----------|------------|---------------
4          | 2        | false      | null          # 2x masaÅ¼ (po 1 dla kaÅ¼dej osoby)
11         | 1        | false      | null
10         | 1        | false      | null
15         | 1        | false      | null
19         | 2        | true       | null (extra)  # 2x rÄ™cznik (po 1 dla kaÅ¼dej osoby)
```

### Pakiet 4: Kobiecy Chill (ma warianty!)
```
service_id | quantity | is_variant | variant_group
-----------|----------|------------|---------------
5          | 1        | true       | "odnowa_a"    # Wariant 1 - masaÅ¼ 30 min
2          | 1        | true       | "odnowa_a"    # Wariant 1 - zabieg twarzy
6          | 1        | true       | "odnowa_b"    # Wariant 2 - masaÅ¼ shea
7          | 1        | true       | "odnowa_b"    # Wariant 2 - peeling
12         | 1        | false      | null
9          | 1        | false      | null
16         | 1        | false      | null
19         | 1        | true       | null (extra)
```

### Pakiet 5: WspÃ³lna Regeneracja (dla 2 osÃ³b!)
```
service_id | quantity | is_variant | variant_group
-----------|----------|------------|---------------
8          | 2        | false      | null          # 2x masaÅ¼ (po 1 dla kaÅ¼dej osoby)
10         | 1        | false      | null
16         | 2        | false      | null          # 2x voucher (po 1 dla kaÅ¼dej osoby)
19         | 2        | true       | null (extra)  # 2x rÄ™cznik (po 1 dla kaÅ¼dej osoby)
```

### Pakiet 6: Impreza Urodzinowa (dla 6 dzieci!)
```
service_id | quantity | is_variant | variant_group
-----------|----------|------------|---------------
10         | 1        | false      | null          # WejÅ›cie dla 6 dzieci (jednorazowe)
17         | 2        | false      | null          # 2x karafka lemoniady
18         | 3        | false      | null          # 3x pizza
19         | 6        | true       | null (extra)  # 6x rÄ™cznik (po 1 dla kaÅ¼dego dziecka)
```

---

## ğŸš¨ Kluczowe uwagi implementacyjne

### 1. Warianty usÅ‚ug (is_variant + variant_group)

**Problem:** NiektÃ³re pakiety majÄ… usÅ‚ugi **do wyboru** (np. Kobiecy Chill).

**RozwiÄ…zanie:** Dodaj kolumny do `package_type_services`:
```sql
ALTER TABLE package_type_services ADD COLUMN is_variant BOOLEAN DEFAULT FALSE;
ALTER TABLE package_type_services ADD COLUMN variant_group VARCHAR(50) DEFAULT NULL;
```

**Logika UI:**
- JeÅ›li `variant_group` jest taki sam dla kilku usÅ‚ug â†’ wyÅ›wietl jako radio buttons
- UÅ¼ytkownik moÅ¼e wybraÄ‡ **TYLKO JEDNÄ„** usÅ‚ugÄ™ z danej grupy
- Po wyborze, tylko wybrana usÅ‚uga trafia do `package_service_usage`

---

### 2. Pakiety dla wielu osÃ³b

**Problem:** Pakiety 3, 5, 6 sÄ… dla **wielu osÃ³b**.

**RozwiÄ…zanie A - Quantity:**
- Ustaw `quantity > 1` dla usÅ‚ug ktÃ³re przysÅ‚ugujÄ… wielokrotnie
- Np. "MasaÅ¼" w Pakiecie 3 ma `quantity=2` (dla pary)

**RozwiÄ…zanie B - Dodaj kolumnÄ™ `persons_count`:**
```sql
ALTER TABLE packages ADD COLUMN persons_count INTEGER DEFAULT 1;
```

**UI:**
- PokaÅ¼ "Pakiet dla X osÃ³b" w widoku szczegÃ³Å‚Ã³w
- Checkboxy dla usÅ‚ug z `quantity > 1` wyÅ›wietl X razy
  - Pakiet 3 â†’ "MasaÅ¼ osoba 1" i "MasaÅ¼ osoba 2"
  - Pakiet 6 â†’ "WejÅ›cie dla 6 dzieci" (pojedynczy checkbox)

---

### 3. "WejÅ›cie do Strefy Relaksu" to JEDNA usÅ‚uga

**BÅ‚Ä…d w obecnej bazie:** Rozdzielono na "Basen", "Jacuzzi", "Sauna", "Grota"

**Poprawka:**
- "WejÅ›cie do Strefy Relaksu" to **JEDNA usÅ‚uga z limitem czasowym**
- W Å›rodku goÅ›Ä‡ moÅ¼e korzystaÄ‡ z: basenu, jacuzzi, saun, groty solnej
- **NIE** checkowaÄ‡ osobno kaÅ¼dej atrakcji!

---

### 4. Vouchery to usÅ‚ugi (nie pieniÄ…dze)

**Pakiety 3, 4, 5** zawierajÄ… vouchery (80 zÅ‚, 200 zÅ‚).

**W systemie:**
- Voucher = usÅ‚uga (row w `package_services`)
- Checkbox "Voucher wykorzystany" = goÅ›Ä‡ wykorzystaÅ‚ voucher
- **NIE** Å›ledzimy za co wydaÅ‚ voucher (to dziaÅ‚ restauracji)

---

### 5. Pakiet 6 dla GRUPY (6 dzieci)

**Specyfika:**
- To nie jest 6 osobnych pakietÃ³w!
- To JEDEN pakiet grupowy
- WejÅ›cie do strefy = dla caÅ‚ej grupy (1x checkbox)
- Pizza = 3 sztuki (3x checkbox)
- Lemoniada = 2 karafki (2x checkbox)
- RÄ™czniki = 6 sztuk (6x checkbox lub pole numeryczne)

---

## âœ… Decyzje implementacyjne (ZATWIERDZONE)

### Pytanie 1: Warianty usÅ‚ug âœ…
**Q:** Jak obsÅ‚ugiwaÄ‡ warianty w Pakiecie 4 (Kobiecy Chill)?

**âœ… WYBRANA OPCJA B:** Warianty widoczne w szczegÃ³Å‚ach pakietu, pracownik checkuje wybrany za pomocÄ… **radio buttons**

**SzczegÃ³Å‚y implementacji:**
- **Pakiety z wariantami:**
  1. **Pakiet 3 (Szept MiÅ‚oÅ›ci):** MasaÅ¼ ciepÅ‚Ä… Å›wiecÄ… / czekoladÄ… (dla kaÅ¼dej z 2 osÃ³b)
  2. **Pakiet 4 (Kobiecy Chill):** Wariant A (masaÅ¼ 30 min + zabieg twarzy) / Wariant B (masaÅ¼ shea 60 min + peeling)
  3. **Pakiet 5 (WspÃ³lna Regeneracja):** MasaÅ¼ klasyczny / ciepÅ‚ymi olejkami (dla kaÅ¼dej z 2 osÃ³b)

- **Logika UI:**
  - Warianty wyÅ›wietlane jako **radio buttons** (jeden wybÃ³r z grupy)
  - Po zaznaczeniu radio buttona przy jednym wariancie, **TYLKO TA USÅUGA** jest trackowana jako wykorzystana
  - Drugi wariant pozostaje **niezaznaczony** (Å¼eby obsÅ‚uga wiedziaÅ‚a czego klient NIE wybraÅ‚)
  - W `package_service_usage` trafia tylko wybrana opcja

**PrzykÅ‚ad UI (Pakiet 3):**
```
â˜ MasaÅ¼ ciepÅ‚Ä… Å›wiecÄ… (60 min) - Osoba 1
â˜ MasaÅ¼ ciepÅ‚Ä… czekoladÄ… (60 min) - Osoba 1
â˜ MasaÅ¼ ciepÅ‚Ä… Å›wiecÄ… (60 min) - Osoba 2
â˜ MasaÅ¼ ciepÅ‚Ä… czekoladÄ… (60 min) - Osoba 2
```

**PrzykÅ‚ad UI (Pakiet 4):**
```
Wariant A:
  âšª MasaÅ¼ relaksacyjny (30 min)
  âšª Zabieg PielÄ™gnacji Twarzy (30 min)

Wariant B:
  âšª MasaÅ¼ masÅ‚em shea (60 min)
  âšª Peeling caÅ‚ego ciaÅ‚a (15 min)
```

---

### Pytanie 2: Pakiety dla wielu osÃ³b âœ…
**Q:** Jak rozrÃ³Å¼niaÄ‡ osoby w pakietach 3, 5, 6?

**âœ… WYBRANA OPCJA A:** Quantity + numeracja ("MasaÅ¼ osoba 1", "MasaÅ¼ osoba 2")

**SzczegÃ³Å‚y implementacji:**
- **NIE** tworzymy dodatkowej tabeli `package_persons`
- UÅ¼ywamy pola `quantity` w `package_type_services` do okreÅ›lenia ile razy usÅ‚uga przysÅ‚uguje
- **Instrukcja dla obsÅ‚ugi:** JeÅ›li pakiet jest dla wiÄ™kszej liczby osÃ³b (np. grupa 4 kobiet dla Pakietu 4), obsÅ‚uga tworzy **N osobnych pakietÃ³w** w systemie
  - Np. "Kowalska_Pakiet4_1", "Kowalska_Pakiet4_2", "Kowalska_Pakiet4_3", "Kowalska_Pakiet4_4"

**PrzykÅ‚ad (Pakiet 3 - dla 2 osÃ³b):**
```
âœ… MasaÅ¼ (ciepÅ‚a Å›wieca) - Osoba 1 - wykorzystano 2025-10-16
â˜ MasaÅ¼ (ciepÅ‚a czekolada) - Osoba 2
â˜ Jacuzzi VIP (60 min)
â˜ WejÅ›cie do Strefy Relaksu (1,5 h)
â˜ Romantyczna kolacja (voucher 200 zÅ‚)
```

**Uwaga:** Dla **Pakietu 6 (Impreza Urodzinowa)** - to JEDEN pakiet dla 6 dzieci (nie tworzymy 6 osobnych!)

---

### Pytanie 3: RÄ™czniki (extra) âœ…
**Q:** Czy rÄ™czniki powinny byÄ‡ widoczne domyÅ›lnie czy ukryte?

**âœ… POZOSTAJE JAK JEST:** Widoczne na liÅ›cie usÅ‚ug (z flagÄ… "Extra")

**SzczegÃ³Å‚y:**
- RÄ™czniki sÄ… juÅ¼ dobrze zaimplementowane (usÅ‚uga ID 13, `is_extra=true`)
- Pozostawiamy obecnÄ… strukturÄ™ bez zmian
- UI juÅ¼ poprawnie wyÅ›wietla rÄ™czniki jako usÅ‚ugÄ™ ekstra

---

### Pytanie 4: Limitowane iloÅ›ci (np. 3x pizza) âœ…
**Q:** Jak checkowaÄ‡ usÅ‚ugi z quantity > 1?

**âœ… WYBRANA OPCJA B:** Osobne checkboxy dla kaÅ¼dej jednostki

**SzczegÃ³Å‚y implementacji:**
- JeÅ›li `quantity = 3` â†’ wyÅ›wietl **3 osobne checkboxy**
- Etykiety: "Pizza #1", "Pizza #2", "Pizza #3"
- KaÅ¼dy checkbox jest osobnym wpisem w `package_service_usage`
- Pracownik moÅ¼e checkowaÄ‡ pojedynczo w miarÄ™ wykorzystania

**PrzykÅ‚ad (Pakiet 6):**
```
â˜ WejÅ›cie do Strefy Relaksu (1,5 h) - dla 6 dzieci
â˜ Karafka lemoniady #1
â˜ Karafka lemoniady #2
â˜ Pizza margherita #1
â˜ Pizza margherita #2
â˜ Pizza margherita #3
â˜ RÄ™cznik #1
â˜ RÄ™cznik #2
â˜ RÄ™cznik #3
â˜ RÄ™cznik #4
â˜ RÄ™cznik #5
â˜ RÄ™cznik #6
```

---

## ğŸ”§ SzczegÃ³Å‚y techniczne: Warianty usÅ‚ug

### Jak warianty dziaÅ‚ajÄ… w bazie danych?

**Tabela `package_type_services` - nowe kolumny:**
```sql
is_variant BOOLEAN DEFAULT FALSE
variant_group VARCHAR(50) NULLABLE
```

**Logika:**
1. JeÅ›li `is_variant = false` â†’ normalna usÅ‚uga (checkbox)
2. JeÅ›li `is_variant = true` I `variant_group IS NOT NULL` â†’ usÅ‚uga w grupie wariantÃ³w (radio button)
3. Wszystkie usÅ‚ugi z tym samym `variant_group` sÄ… wzajemnie wykluczajÄ…ce siÄ™

### PrzykÅ‚ad dla Pakietu 4 (Kobiecy Chill):

**W tabeli `package_type_services`:**
```
package_type | service_id | quantity | is_variant | variant_group
-------------|------------|----------|------------|---------------
4            | 5          | 1        | TRUE       | "masaz_wariant"
4            | 2          | 1        | TRUE       | "masaz_wariant"
4            | 6          | 1        | TRUE       | "masaz_wariant_b"
4            | 7          | 1        | TRUE       | "masaz_wariant_b"
4            | 12         | 1        | FALSE      | NULL
4            | 9          | 1        | FALSE      | NULL
4            | 16         | 1        | FALSE      | NULL
4            | 19         | 1        | FALSE      | NULL (extra)
```

**Grupowanie:**
- **Grupa "masaz_wariant":** service_id 5 (MasaÅ¼ relaksacyjny) + service_id 2 (Zabieg twarzy)
- **Grupa "masaz_wariant_b":** service_id 6 (MasaÅ¼ shea) + service_id 7 (Peeling)

**UI wyÅ›wietli:**
```
Wybierz wariant (jedno z poniÅ¼szych):

( ) Wariant A: MasaÅ¼ relaksacyjny + Zabieg PielÄ™gnacji Twarzy
    - MasaÅ¼ relaksacyjny (30 min)
    - Zabieg PielÄ™gnacji Twarzy (30 min)

( ) Wariant B: MasaÅ¼ masÅ‚em shea + Peeling caÅ‚ego ciaÅ‚a
    - MasaÅ¼ masÅ‚em shea (60 min)
    - Peeling caÅ‚ego ciaÅ‚a (15 min)

PozostaÅ‚e usÅ‚ugi:
â˜ Jacuzzi VIP (60 min)
â˜ WejÅ›cie do Strefy Relaksu (2,5 h)
â˜ Voucher Strefa Smaku (80 zÅ‚)
â˜ WypoÅ¼ycz rÄ™cznik i szlafrok
```

### Logika checkowania wariantÃ³w:

**Krok 1:** Pracownik wybiera radio button dla Wariantu A
**Krok 2:** System automatycznie zaznacza OBIE usÅ‚ugi z grupy "masaz_wariant":
- âœ… service_id 5 (MasaÅ¼ relaksacyjny) â†’ `package_service_usage.used_at = NOW()`
- âœ… service_id 2 (Zabieg twarzy) â†’ `package_service_usage.used_at = NOW()`

**Krok 3:** UsÅ‚ugi z grupy "masaz_wariant_b" pozostajÄ… NIEZAZNACZONE (klient ich nie wybraÅ‚)

**âš ï¸ WAÅ»NE:** Gdy klient wybiera WARIANT (np. Wariant A), to wszystkie usÅ‚ugi w tym wariancie sÄ… traktowane jako JEDNA caÅ‚oÅ›Ä‡!

---

## ğŸ”§ SzczegÃ³Å‚y techniczne: Quantity > 1

### Jak dziaÅ‚a quantity dla usÅ‚ug?

**PrzykÅ‚ad: Pakiet 6 (Impreza Urodzinowa)**

**W tabeli `package_type_services`:**
```
package_type | service_id | quantity
-------------|------------|----------
6            | 10         | 1         # WejÅ›cie do strefy (1x dla caÅ‚ej grupy)
6            | 17         | 2         # Karafka lemoniady (2 sztuki)
6            | 18         | 3         # Pizza (3 sztuki)
6            | 19         | 6         # RÄ™cznik (6 sztuk - po 1 dla kaÅ¼dego dziecka)
```

**W tabeli `package_service_usage` (po utworzeniu pakietu):**
```
package_id | service_id | instance_number | used_at
-----------|------------|-----------------|--------
45         | 10         | NULL            | NULL      # WejÅ›cie (pojedyncze)
45         | 17         | 1               | NULL      # Lemoniada #1
45         | 17         | 2               | NULL      # Lemoniada #2
45         | 18         | 1               | NULL      # Pizza #1
45         | 18         | 2               | NULL      # Pizza #2
45         | 18         | 3               | NULL      # Pizza #3
45         | 19         | 1               | NULL      # RÄ™cznik #1
45         | 19         | 2               | NULL      # RÄ™cznik #2
45         | 19         | 3               | NULL      # RÄ™cznik #3
45         | 19         | 4               | NULL      # RÄ™cznik #4
45         | 19         | 5               | NULL      # RÄ™cznik #5
45         | 19         | 6               | NULL      # RÄ™cznik #6
```

**âš ï¸ NOWA KOLUMNA:** `instance_number` w `package_service_usage`
- `NULL` = usÅ‚uga pojedyncza (quantity = 1)
- `1, 2, 3, ...` = numer instancji (quantity > 1)

**Migracja:**
```php
Schema::table('package_service_usage', function (Blueprint $table) {
    $table->integer('instance_number')->nullable()->after('service_id');
});
```

---

## ğŸ”§ SzczegÃ³Å‚y techniczne: Pakiety dla wielu osÃ³b

### Opcja A: Jeden pakiet dla pary (np. Pakiet 3, 5)

**Strategia:** Quantity okreÅ›la ile razy usÅ‚uga przysÅ‚uguje

**PrzykÅ‚ad: Pakiet 3 (Szept MiÅ‚oÅ›ci) dla Jana i Anny Kowalskich**

**W systemie:** Jeden pakiet `package_id = "20251016-01"`, `custom_id = "Jan i Anna Kowalscy"`

**W tabeli `package_service_usage`:**
```
package_id | service_id | instance_number | label                | used_at
-----------|------------|-----------------|----------------------|--------
20251016-01| 4          | 1               | "Osoba 1"            | NULL
20251016-01| 4          | 2               | "Osoba 2"            | NULL
20251016-01| 11         | NULL            | NULL                 | NULL  # Jacuzzi VIP (wspÃ³lne)
20251016-01| 10         | NULL            | NULL                 | NULL  # WejÅ›cie (wspÃ³lne)
20251016-01| 15         | NULL            | NULL                 | NULL  # Kolacja (wspÃ³lna)
20251016-01| 19         | 1               | "Osoba 1"            | NULL  # RÄ™cznik #1
20251016-01| 19         | 2               | "Osoba 2"            | NULL  # RÄ™cznik #2
```

**UI:**
```
Pakiet: 20251016-01 (Jan i Anna Kowalscy)
Typ: Pakiet 3 - Szept MiÅ‚oÅ›ci (dla 2 osÃ³b)

Strefa Odnowy:
â˜ MasaÅ¼ (ciepÅ‚a Å›wieca / czekolada) - Osoba 1
â˜ MasaÅ¼ (ciepÅ‚a Å›wieca / czekolada) - Osoba 2

Strefa Relaksu:
â˜ Jacuzzi VIP (60 min)
â˜ WejÅ›cie do Strefy Relaksu (1,5 h)

Strefa Smaku:
â˜ Romantyczna kolacja (voucher 200 zÅ‚)

Extra:
â˜ RÄ™cznik i szlafrok - Osoba 1
â˜ RÄ™cznik i szlafrok - Osoba 2
```

### Opcja B: WiÄ™cej niÅ¼ 2 osoby (np. 4 kobiety dla Pakietu 4)

**Strategia:** ObsÅ‚uga tworzy N osobnych pakietÃ³w

**W systemie:**
- `package_id = "20251016-01"`, `custom_id = "Kowalska Anna"`
- `package_id = "20251016-02"`, `custom_id = "Nowak Maria"`
- `package_id = "20251016-03"`, `custom_id = "WiÅ›niewska Ewa"`
- `package_id = "20251016-04"`, `custom_id = "ZieliÅ„ska Kasia"`

**KaÅ¼dy pakiet jest niezaleÅ¼ny** i ma swoje wÅ‚asne checkboxy.

---

## ğŸ”¥ Akcje do wykonania (po zatwierdzeniu)

### Krok 1: Backup obecnej bazy
```bash
./scripts/backup-database.sh
```

### Krok 2: Migracja - dodaj nowe kolumny
```php
// database/migrations/YYYY_MM_DD_add_variant_support_to_package_type_services.php
Schema::table('package_type_services', function (Blueprint $table) {
    $table->boolean('is_variant')->default(false);
    $table->string('variant_group')->nullable();
});

Schema::table('packages', function (Blueprint $table) {
    $table->integer('persons_count')->default(1);
});
```

### Krok 3: Seeder - usuÅ„ dummy dane i dodaj prawdziwe
```php
// database/seeders/RealPackageServicesSeeder.php
PackageService::truncate();
PackageTypeService::truncate();

// Dodaj 19 prawdziwych usÅ‚ug (patrz tabela powyÅ¼ej)
// ...
```

### Krok 4: Aktualizuj modele
```php
// app/Models/PackageService.php
protected $fillable = [
    'name', 'zone', 'description', 'duration', 'is_extra', 'has_variants'
];

// app/Models/PackageTypeService.php (utworzyÄ‡ jeÅ›li nie ma)
class PackageTypeService extends Model {
    protected $fillable = [
        'package_type', 'service_id', 'quantity', 'is_variant', 'variant_group'
    ];
}
```

### Krok 5: UI - wyÅ›wietlanie wariantÃ³w
```tsx
// resources/js/Pages/Packages/Show.tsx
{service.is_variant ? (
  <div className="variant-group">
    <input type="radio" name={service.variant_group} ... />
  </div>
) : (
  <input type="checkbox" ... />
)}
```

### Krok 6: UI - pakiety dla wielu osÃ³b
```tsx
{pkg.persons_count > 1 && (
  <div className="alert">
    â„¹ï¸ Pakiet dla {pkg.persons_count} osÃ³b
  </div>
)}
```

### Krok 7: Testy
- [ ] UtwÃ³rz pakiet typu 1 (Naturalna Harmonia)
- [ ] SprawdÅº czy pokazujÄ… siÄ™ poprawne usÅ‚ugi
- [ ] Zaznacz usÅ‚ugÄ™ jako wykorzystanÄ…
- [ ] Wygeneruj PDF
- [ ] PowtÃ³rz dla pakietÃ³w 2-6

---

## ğŸ“… Timeline (szacunkowy)

| Krok | Czas | Priorytet |
|------|------|-----------|
| Zatwierdzenie zakresu (ten dokument) | 1 dzieÅ„ | ğŸ”´ KRYTYCZNE |
| Migracja + seeder | 2h | ğŸ”´ KRYTYCZNE |
| Aktualizacja modeli | 1h | ğŸ”´ KRYTYCZNE |
| UI - wyÅ›wietlanie usÅ‚ug | 3h | ğŸŸ  WYSOKIE |
| UI - warianty (radio buttons) | 2h | ğŸŸ  WYSOKIE |
| UI - pakiety dla wielu osÃ³b | 2h | ğŸŸ¡ ÅšREDNIE |
| PDF - aktualizacja templates | 4h | ğŸŸ¡ ÅšREDNIE |
| Testy | 2h | ğŸŸ¢ NISKIE |

**ÅÄ…cznie:** ~16h (2 dni robocze)

---

## âœ… Potwierdzenie i zatwierdzenie

### Checklist przed implementacjÄ…:

- [x] Przeczytano caÅ‚y dokument
- [x] Zweryfikowano z oficjalnÄ… stronÄ… termygorce.pl/pakiety
- [x] Odpowiedziano na pytania 1-4 âœ…
  - [x] Pytanie 1: Warianty â†’ Radio buttons w UI
  - [x] Pytanie 2: Pakiety dla wielu osÃ³b â†’ Quantity + numeracja
  - [x] Pytanie 3: RÄ™czniki â†’ PozostajÄ… jak sÄ…
  - [x] Pytanie 4: Limitowane iloÅ›ci â†’ Osobne checkboxy
- [x] Zatwierdzono listÄ™ usÅ‚ug (19 pozycji)
- [x] Zatwierdzono mapping pakietÃ³w do usÅ‚ug
- [ ] **MOÅ»NA ROZPOCZÄ„Ä† IMPLEMENTACJÄ˜** â¬…ï¸ Czeka na Twoje zatwierdzenie!

---

## ğŸ“‹ Podsumowanie decyzji technicznych

### Nowe kolumny do dodania:

**1. `package_type_services` table:**
```sql
is_variant BOOLEAN DEFAULT FALSE
variant_group VARCHAR(50) NULLABLE
```

**2. `package_service_usage` table:**
```sql
instance_number INTEGER NULLABLE  -- dla quantity > 1
```

### Pakiety z wariantami (radio buttons):

| Pakiet | Warianty |
|--------|----------|
| **Pakiet 3** | MasaÅ¼ Å›wiecÄ… / czekoladÄ… (x2 osoby) |
| **Pakiet 4** | Wariant A (masaÅ¼ 30 min + zabieg) / Wariant B (masaÅ¼ shea + peeling) |
| **Pakiet 5** | MasaÅ¼ klasyczny / olejkami (x2 osoby) |

### Pakiety dla wielu osÃ³b (quantity):

| Pakiet | Osoby | Strategia |
|--------|-------|-----------|
| **Pakiet 3** | 2 osoby | Jeden pakiet, quantity=2 dla masaÅ¼u i rÄ™cznikÃ³w |
| **Pakiet 5** | 2 osoby | Jeden pakiet, quantity=2 dla masaÅ¼u, vouchera i rÄ™cznikÃ³w |
| **Pakiet 6** | 6 dzieci | Jeden pakiet, quantity=6 dla rÄ™cznikÃ³w, 3 dla pizzy, 2 dla lemoniady |

### Pakiety z quantity > 1:

| Pakiet | UsÅ‚uga | Quantity | UI |
|--------|--------|----------|-----|
| **Pakiet 3** | MasaÅ¼ | 2 | "MasaÅ¼ - Osoba 1", "MasaÅ¼ - Osoba 2" |
| **Pakiet 3** | RÄ™cznik | 2 | "RÄ™cznik #1", "RÄ™cznik #2" |
| **Pakiet 5** | MasaÅ¼ | 2 | "MasaÅ¼ - Osoba 1", "MasaÅ¼ - Osoba 2" |
| **Pakiet 5** | Voucher | 2 | "Voucher - Osoba 1", "Voucher - Osoba 2" |
| **Pakiet 5** | RÄ™cznik | 2 | "RÄ™cznik #1", "RÄ™cznik #2" |
| **Pakiet 6** | Lemoniada | 2 | "Karafka lemoniady #1", "Karafka lemoniady #2" |
| **Pakiet 6** | Pizza | 3 | "Pizza #1", "Pizza #2", "Pizza #3" |
| **Pakiet 6** | RÄ™cznik | 6 | "RÄ™cznik #1" ... "RÄ™cznik #6" |

---

**Status:** âœ… GOTOWE DO IMPLEMENTACJI (czeka na Twoje "OK")
**Data analizy:** 2025-10-16
**NastÄ™pny krok:** RozpoczÄ™cie implementacji migracji i seedera

